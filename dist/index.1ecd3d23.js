const t=t=>document.querySelector(t),e=t(".chat-header__menu"),i=t(".chat-header__menu__nav"),n=t(".chat-header__menu__nav__list"),a=t(".chat-header__new-chat"),s=t(".chat-main__aside__new-chat"),c=t(".chat-main__aside__list"),l=t(".chat-main__main__article"),r=t(".chat-main__main__form__question__textarea"),o=()=>{l.innerHTML="",r.focus()},d=async function(t){let{target:{className:e},target:i}=t;if(!["list-item","list-item__text"].includes(e))return;let n=this.children;for(let t of n)t.classList.remove("active");let a=e.includes("list-item__text")?i.parentNode:i;a.classList.add("active"),l.innerHTML="",await u().catch(t=>{throw t})};window.addEventListener("resize",()=>{let t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${t}px`)}),e.addEventListener("click",()=>{let{classList:t}=i;if([...t].includes("visible")){i.classList.remove("visible");return}i.classList.add("visible")}),a.addEventListener("click",o),s.addEventListener("click",o),n.addEventListener("click",d),c.addEventListener("click",d),r.addEventListener("keyup",t=>{let{key:e,shiftKey:i}=t;"Enter"!==e||i||(h.push({role:1,content:r.value}),w([{role:1,content:r.value}]),r.value="",l.scrollTop=l.scrollHeight,setTimeout(()=>{h.push({role:2,content:"抱歉我没有理解您的问题。"}),w([{role:2,content:"抱歉我没有理解您的问题。"}]),l.scrollBy({top:99999})},1e3))});let _=[],h=[];const p=async()=>{let{data:t}=await fetch("public/fetch-title-history-list.json").then(t=>t.json()).catch(t=>{throw t});_=Array.isArray(t)?t:[],L()},u=async()=>{let{data:t}=await fetch(`public/fetch-chat-history-list-${m(3)}.json`).then(t=>t.json()).catch(t=>{throw t});w(h=Array.isArray(t)?t:[])},m=t=>Math.floor(Math.random()*t),v=t=>{let e=document.createElement(t.tag);if(t.classList)for(let i of t.classList)e.classList.add(i);if(t.text&&(t.text.includes("```")||(e.textContent=t.text),e.innerHTML=t.text.replace(/(```)([\s\S]+?)(```)/g,'<pre class="content__code"><code>$2</code></pre>')),t.children)for(let i of t.children){let t=v(i);e.appendChild(t)}return e},L=()=>{let t=_.map(t=>{let{content:e}=t;return{tag:"li",classList:["list-item"],children:[{tag:"p",classList:["list-item__text"],text:e},{tag:"div",classList:["list-item__button-wrapper"],children:[{tag:"div",classList:["button-wrapper__download"]},{tag:"div",classList:["button-wrapper__delete"]}]}]}})||[];for(let e of t){let t=v(e),i=v(e);c.appendChild(t),n.appendChild(i)}},w=t=>{let e=t.map(t=>{let{role:e,content:i}=t,n=new Map().set(1,{tag:"section",classList:["article__section","user"],children:[{tag:"div",classList:["section__content-wrapper"],children:[{tag:"div",classList:["content-wrapper__profile"]},{tag:"div",classList:["content-wrapper__content"],text:i}]}]}).set(2,{tag:"section",classList:["article__section"],children:[{tag:"div",classList:["section__content-wrapper"],children:[{tag:"div",classList:["content-wrapper__profile"]},{tag:"div",classList:["content-wrapper__content"],text:i}]}]});return n.get(e)})||[];for(let t of e){let e=v(t);l.appendChild(e)}},f=async()=>{let t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${t}px`),await p().catch(t=>{throw t}),await u().catch(t=>{throw t})};f();
//# sourceMappingURL=index.1ecd3d23.js.map
