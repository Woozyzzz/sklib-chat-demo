const e=e=>document.querySelector(e),t=e(".chat-header__menu"),s=e(".chat-header__menu__nav"),i=e(".chat-header__menu__nav__sign-in-or-up"),n=e(".chat-header__menu__nav__list"),a=e(".chat-header__new-chat"),c=e(".chat-header__menu__nav__bottom-list .list-item.sign-out"),l=e(".chat-main__aside__sign-in-or-up"),r=e(".chat-main__aside__new-chat"),d=e(".chat-main__aside__list"),o=e(".chat-main__aside__bottom-list .list-item.sign-out"),_=e(".chat-main__main__article"),m=e(".chat-main__main__form__question__textarea"),v=e(".chat-mask"),L=e(".chat-mask__dialog .dialog__header__close"),h=()=>{v.classList.add("visible")},u=()=>{_.innerHTML="",m.focus()},p=async function(e){let{target:{className:t},target:s}=e;if(!["list-item","list-item__text"].includes(t))return;let i=this.children;for(let e of i)e.classList.remove("active");let n=t.includes("list-item__text")?s.parentNode:s;n.classList.add("active"),_.innerHTML=""},g=()=>{k(""),b(!1)};window.addEventListener("resize",()=>{let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)}),window.addEventListener("click",e=>{let{target:i}=e;!v.classList.contains("visible")&&(t===i||s.contains(i)||s.classList.remove("visible"))}),t.addEventListener("click",e=>{let{target:i}=e;if(s.classList.contains("visible")){if(i!==t)return;s.classList.remove("visible");return}s.classList.add("visible")}),i.addEventListener("click",h),n.addEventListener("click",p),a.addEventListener("click",u),c.addEventListener("click",g),l.addEventListener("click",h),r.addEventListener("click",u),d.addEventListener("click",p),o.addEventListener("click",g),m.addEventListener("keyup",e=>{let{key:t,shiftKey:s}=e;"Enter"!==t||s||(f.push({role:1,content:m.value}),x([{role:1,content:m.value}]),m.value="",_.scrollTop=_.scrollHeight,setTimeout(()=>{f.push({role:2,content:"抱歉我没有理解您的问题。"}),x([{role:2,content:"抱歉我没有理解您的问题。"}]),_.scrollBy({top:99999})},1e3))}),L.addEventListener("click",()=>{v.classList.remove("visible"),k("admin"),b(!0)});let f=[];const w=e=>{let t=document.createElement(e.tag);if(e.classList)for(let s of e.classList)t.classList.add(s);if(e.text&&(e.text.includes("```")||(t.textContent=e.text),t.innerHTML=e.text.replace(/(```)([\s\S]+?)(```)/g,'<pre class="content__code"><code>$2</code></pre>')),e.children)for(let s of e.children){let e=w(s);t.appendChild(e)}return t},E=()=>{let e=localStorage.getItem("signedIn")||"";return!!e},k=e=>{if(!e){localStorage.removeItem("signedIn");return}localStorage.setItem("signedIn",e)},x=e=>{let t=e.map(e=>{let{role:t,content:s}=e,i=new Map().set(1,{tag:"section",classList:["article__section","user"],children:[{tag:"div",classList:["section__content-wrapper"],children:[{tag:"div",classList:["content-wrapper__profile"]},{tag:"div",classList:["content-wrapper__content"],text:s}]}]}).set(2,{tag:"section",classList:["article__section"],children:[{tag:"div",classList:["section__content-wrapper"],children:[{tag:"div",classList:["content-wrapper__profile"]},{tag:"div",classList:["content-wrapper__content"],text:s}]}]});return i.get(t)})||[];for(let e of t){let t=w(e);_.appendChild(t)}},b=(e=!0)=>{let t="signed-in";if(!e){i.classList.remove(t),l.classList.remove(t),c.classList.remove(t),o.classList.remove(t);return}i.classList.add(t),l.classList.add(t),c.classList.add(t),o.classList.add(t)},y=async()=>{let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`),E()&&b(!0)};y();
//# sourceMappingURL=index.513f5224.js.map
