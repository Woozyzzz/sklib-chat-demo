const t=t=>document.querySelector(t),e=t(".form__new-chat-button"),s=t(".aside__list"),i=t(".main__article"),n=t(".question__textarea"),a=t(".question__submit-button");e.addEventListener("click",()=>{i.innerHTML="",n.focus()}),s.addEventListener("click",async t=>{let{target:{className:e}}=t;"list-item"===e&&(i.innerHTML="",await r().catch(t=>{throw t}))}),i.addEventListener("click",t=>{let{target:{className:e},target:s}=t;e.includes("content__more-button")&&(e.includes("expanded")?(s.innerHTML="展开更多",s.classList.remove("expanded"),s.previousSibling.classList.remove("expanded")):(s.innerHTML="收起更多",s.classList.add("expanded"),s.previousSibling.classList.add("expanded")))}),a.addEventListener("click",()=>{console.log(n.value)});let c=[],l=[];const o=async()=>{let{data:t}=await fetch("public/fetch-title-history-list.json").then(t=>t.json()).catch(t=>{throw t});c=Array.isArray(t)?t:[],h()},r=async()=>{let{data:t}=await fetch(`public/fetch-chat-history-list-${d(3)}.json`).then(t=>t.json()).catch(t=>{throw t});l=Array.isArray(t)?t:[],L()},d=t=>Math.floor(Math.random()*t),_=t=>{let e=document.createElement(t.tag);if(t.classList)for(let s of t.classList)e.classList.add(s);if(t.text&&(e.textContent=t.text),t.children)for(let s of t.children){let t=_(s);e.appendChild(t)}return e},h=()=>{let t=c.map(t=>{let{content:e}=t;return{tag:"li",classList:["list-item"],text:e}})||[];for(let e of t){let t=_(e);s.appendChild(t)}},L=()=>{let t=l.map(t=>{let{role:e,content:s}=t,i=s.length>500?{tag:"section",classList:["article__section"],children:[{tag:"div",classList:["section__profile"]},{tag:"div",classList:["section__content"],children:[{tag:"div",classList:["content__text","more"],text:s},{tag:"span",classList:["content__more-button"],text:"展开更多"}]}]}:{tag:"section",classList:["article__section"],children:[{tag:"div",classList:["section__profile"]},{tag:"div",classList:["section__content"],children:[{tag:"div",classList:["content__text"],text:s}]}]},n=new Map().set(1,{tag:"section",classList:["article__section","user"],children:[{tag:"div",classList:["section__profile"]},{tag:"div",classList:["section__content"],text:s}]}).set(2,i);return n.get(e)})||[];for(let e of t){let t=_(e);i.appendChild(t)}},p=async()=>{await o().catch(t=>{throw t}),await r().catch(t=>{throw t})};p();
//# sourceMappingURL=index.16bb795f.js.map
